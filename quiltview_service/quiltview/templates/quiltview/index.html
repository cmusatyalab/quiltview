<!DOCTYPE html>
<html>
  <head>
    <title>Video segments cookie generator</title>
    <!-- Bootstrap -->
    <link href="{{ STATIC_URL }}assets/css/bootstrap.css" rel="stylesheet">
    <link href="{{ STATIC_URL }}assets/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="{{ STATIC_URL }}assets/css/docs.css" rel="stylesheet">
    <link href="{{ STATIC_URL }}assets/js/google-code-prettify/prettify.css" rel="stylesheet">
  </head>

  <body>
    <h1>Make your query at QuiltView!</h1> <hr>

    <form action="/quiltview/query" method="get">
    {% csrf_token %}
      <div>
        <div class="row-fluid">
          <div class="span3">
            <b>Write your query below: </b>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span6">
            <input type="text" name="query_content" placeholder="e.g. What is the weather">
            at      
            <input type="text" name="query_location" placeholder="Pittsburgh">
            ?
          </div>
        </div>

        <div class="row-fluid">
          <div class="col-lg-2">
            <b>Timeout: </b> 
            <input type="text" class="form-control" name="time_out_n" placeholder="10">     
            <select>
              <option>Minutes</option>
              <option>Hours</option>
              <option>Days</option>
            </select>
          </div>
        </div>

        <div class="row-fluid">
          <div class="col-lg-2">
            <b>Accepted staleness: </b>
            <input type="text" class="form-control" name="accepted_staleness_n" placeholder="10">
            <select>
              <option>Minutes</option>
              <option>Hours</option>
              <option>Days</option>
            </select>
          </div>
        </div>

        <div class="row-fluid">
          <div class="col-lg-2">
            <b>Reward: </b>
            <input type="text" class="form-control" name="reward" placeholder="1">
          </div>
        </div>

      </div>

      <p>
        <button class="btn" type="submit" name="post" value="False">Check existing</button>
        <button class="btn btn-primary" type="submit" name="post" value="True">Submit</button>
      </p>

      {% if is_post %}
        <hr>
        Your query "{{ query.content }}" has been sent. <br>
        Location has been identified as ({{ query.interest_location_lat }}, {{ query.interest_location_lat }})
        
      {% endif %}

      {% if is_cache %}
        <hr>
      {% endif %}

      {% if is_check %}
        <hr>
        <p>
          {{ queries|length }} queries found.
        </p>
      {% load tz %}
          {% for query in queries %}
            {{ query.content }} (posted at {{ query.requested_time }})  <a href="/quiltview/response?query_id={{ query.id }}">view responses</a> 
            <br>
          {% endfor %}
      {% endif %}

    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="{{ STATIC_URL }}assets/js/bootstrap.js"></script>
  </body>
</html>
